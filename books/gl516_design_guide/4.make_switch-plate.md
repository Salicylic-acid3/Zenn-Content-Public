---
title: "⌨テンプレートからスイッチプレートを作成する"
---

# １．テンプレートファイルを編集する

- リネームした`.kicad_pcb`ファイルを開く。
![](/images/gl516design/4-1_sw-plate-1.png)

- `表示`→`グリッド設定`をクリックする。
![](/images/gl516design/4-2_sw-plate-2.png)

- `ユーザー定義グリッド`ウインドウのサイズX、サイズYの欄に`19.05/8`を入力して「OK」をクリックする。
![](/images/gl516design/4-3_sw-plate-3.png)

:::message
`19.05/8`と入力し、次の項目にカーソルが移った瞬間に`2.38125`に変化しますが正常です。
他にもKiCadはテキスト欄に入力した数値は即座に計算し、結果だけが残る仕様です。
計算式も残れば便利なんですけどね。。。
:::

:::details Tips:グリッドのサイズ
グリッドのサイズはキーキャップのサイズに合わせておくと便利です。
CherryMX互換スイッチ用のキーキャップは`7.5 inch`の`19.05 mm`です。
そこでグリッドに`19.05/8`を設定することでスイッチ穴を綺麗に並べるのが楽になります。
ちなみにKailh Choc v1スイッチ用のキーキャップは横`18 mm`、縦`17 mm`で並べることで、ピッチリ隙間がなくなります。（俗に言う狭ピッチと呼ばれる状態）
もちろん、Kailh Choc v1スイッチを用いていてもCherryMX互換用のピッチで並べることはできます。
例：[7sKB](https://salicylic-acid3.booth.pm/items/1673395)
:::

定義したグリッドは何も無いところで右クリックして適用できます。
![](/images/gl516design/4-4_sw-plate-4.png)

- 検討したキーレイアウトの通りにスイッチ穴を並べる。
![](/images/gl516design/4-5_sw-plate-5.png)

:::details Tips:スイッチ穴を動かすためのショートカットキー
- フットプリントを選択して `Ctrl + D`
フットプリントをコピーする。

- フットプリントを選択して `Ctrl + M`
数値を入力してフットプリントを移動する。
![](/images/gl516design/4-6_sw-plate-6.png)

- フットプリントを選択して`E`
フットプリントのプロパティを開く。
![](/images/gl516design/4-7_sw-plate-7.png)
フットプリントの座標を取得する、フットプリントを変更するのに使います。

- フットプリントを選択して`R`
フットプリントを90度回転する。
:::

:::details Tips:スイッチ穴を上手く傾けるコツ
- テンプレートの範囲外の何もないところにスイッチ穴を綺麗に並べる
![](/images/gl516design/4-8_sw-plate-8.png)
- マウスでまとめて選択して`Ctrl + M`
傾けたい角度を入力する
![](/images/gl516design/4-9_sw-plate-9.png)
- 揃ったままスイッチ穴が傾くので、まとめて選択して戻す
![](/images/gl516design/4-10_sw-plate-10.png)
:::

:::details Tips:スイッチ穴を設定できる範囲
テンプレートファイルの灰色の線の範囲がスイッチ穴を配置できる範囲です。
各スイッチ穴には灰色の線があり、それがキーキャップのサイズとなる19.05mm角ですので、テンプレートからはみ出ないようにしましょう。
- OKな例
![](/images/gl516design/4-11_sw-plate-11.png)
- NGな例
![](/images/gl516design/4-12_sw-plate-12.png)
:::

:::details Tips:スイッチ穴のサイズの変更
2u[^1]以下のサイズのキーの場合、スイッチ用の穴は変わらないので大丈夫ですが、キー同士が干渉せず並べられているか確認するためにキーのサイズに合わせたフットプリントに変更しておきましょう。
- サイズを変更するフットプリントを選択して`E`フットプリントのプロパティを開き、`フットプリントを変更`をクリックする。
![](/images/gl516design/4-13_sw-plate-13.png)
- 新しいフットプリント識別子欄の右側の本棚のマークをクリックする。
![](/images/gl516design/4-14_sw-plate-14.png)
- 画面左のライブラリ一覧から`kbd_SW_Hole`を選択し、変更したいサイズのキーのフットプリントをダブルクリックする。
![](/images/gl516design/4-15_sw-plate-15.png)
- `変更`クリックし、フットプリントが更新されたら`閉じる`をクリックする。
![](/images/gl516design/4-16_sw-plate-16.png)
:::

[^1]: キーキャップのサイズはuという単位で数える。
最小のキーキャップは1uで、通常アルファベットのキーキャップなどが該当する。
キーキャップは0.25u刻みで増加しますが、2.5uなどの余り存在しないキーキャップのサイズというものがあったりする。
ピンとこない方は販売しているキーキャップのサイズをよく確認してみることをオススメする。

:::details Tips:長いキーの向き
長い2u[^1]以上のキーのスイッチ穴はスタビライザーが必要になるため、スタビライザー用の穴が追加されています。
最上段及び最下段に2u以上のキーを設定する場合、スタビライザーバーが基板の内側に向くように設定しておく方が無難です。
スタビライザーバーは長穴がオフセットされた側に通ります。
- OKな例（上にスタビライザーバーが通る）
![](/images/gl516design/4-17_sw-plate-17.png)
- NGな例（下にスタビライザーバーが通る）
![](/images/gl516design/4-18_sw-plate-18.png)
:::

:::details Tips:ロータリーエンコーダ
ロータリーエンコーダ[^2]を設置する場合、スイッチプレートには通常のスイッチ穴と同様のものを用いて大丈夫です。
ただし、キーキャップとの干渉を防ぐため、目安の線を引いておくと確実です。
- 画面右のレイヤーマネージャの`F.Fab`を選択し、`円を追加`をクリック。
![](/images/gl516design/4-19_sw-plate-19.png)
- テンプレートの範囲外の何もないところに円を追加する。
![](/images/gl516design/4-20_sw-plate-20.png)
- 追加した円を選択し、`E`キーを押してノブの半径を入力する。
![](/images/gl516design/4-21_sw-plate-21.png)
- ロータリーエンコーダ用の穴で`E`キーを押してXY座標の値をコピーする。
![](/images/gl516design/4-22_sw-plate-22.png)
- 追加した円をもう一度選択し、`E`キーを押してXY座標の値をペーストして`OK`をクリックする。
![](/images/gl516design/4-23_sw-plate-23.png)
:::
[^2]: 回転を電気信号に変換する部品。
キーボードにも搭載される例が多くなってきた。
音量ボリュームだけでなく、いろいろなキーも割当が可能。

:::details Tips:複数のレイアウトをサポートするスイッチプレートについて
複数のレイアウトをサポートするようなプレートを作る場合は、フットプリントから作成する必要があるため、本手順では一旦割愛させていただきます。
:::

# ２．3Dビューアーで確認する。

- `表示`→`3Dビューアー`で3Dビューアーを起動する。
![](/images/gl516design/4-24_sw-plate-24.png)

- エラーが出ず、表示されることを確認する。
![](/images/gl516design/4-25_sw-plate-25.png)

:::details Tips:3Dビューアーで基板の色を変更する
なんとなく完成品のイメージが湧くと思うので、基板の色[^3]を変更してみてもいいと思います。
- 3Dビューアーで`設定`→`色の選択`→`ハンダ マスクの色`をクリックして基板の色を変更する。
![](/images/gl516design/4-26_sw-plate-26.png)
[^3]: 本当はソルダレジストの色ではあるが、便宜上基板の色としている。
:::

# ３．スイッチ穴のリファレンス番号をKLEデータに合わせる。

- スイッチ穴を選択し`E`キーを押してプロパティを開き、リファレンスにKLEのデータ作成時に振った番号を入力し`OK`をクリックします。
![](/images/gl516design/4-27_sw-plate-27.png)
![](/images/gl516design/4-28_sw-plate-28.png)


