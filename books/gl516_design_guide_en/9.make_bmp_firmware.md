---
title: "ğŸ–¥BMPç”¨ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹"
---

# ï¼ï¼æœ¬ãƒãƒ£ãƒ—ã‚¿ãƒ¼ã®ã‚´ãƒ¼ãƒ«

æœ¬ãƒãƒ£ãƒ—ã‚¿ãƒ¼ãŒå®Œäº†ã™ã‚‹ã¨ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚’ç„¡ç·šã§å‹•ä½œã•ã›ã‚‹ãŸã‚ã®BLE Micro Proï¼ˆä»¥ä¸‹BMPï¼‰ç”¨è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒå‡ºæ¥ä¸ŠãŒã‚Šã¾ã™ã€‚
![](/images/gl516design/8-11_template-8.png)

:::message
BMPã«ã¯å°‚ç”¨ã®ç´ æ™´ã‚‰ã—ã„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€åŸºæœ¬çš„ã«ãã¡ã‚‰ã‚’å‚ç…§ã™ã¹ãã§ã™ã€‚
https://github.com/sekigon-gonnoc/BLE-Micro-Pro/blob/master/docs/edit_config_file.md
æœ¬ç« ã§ã¯BMPã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ä¸€éƒ¨è£œå®Œã™ã‚‹å†…å®¹ã¨ã€GL516äº’æ›PCBå°‚ç”¨ã®æ‰‹æŠœãã‚’ç´¹ä»‹ã—ã¾ã™ã€‚
:::

# ï¼‘ï¼å¤‰æ›ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç”¨ã„ã¦QMKãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã‹ã‚‰BMPè¨­å®šç”¨ã®jsonãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹

å‰ã®å·¥ç¨‹ã§QMKãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã‚’ä½œæˆã—ã¦ã„ã‚‹å ´åˆã€å°‚ç”¨ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç”¨ã„ã¦è‡ªå‹•ç”Ÿæˆã§ãã¾ã™ã€‚

- å¤‰æ›ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã€‚
https://github.com/sekigon-gonnoc/BLE-Micro-Pro
![](/images/gl516design/9-1_bmp-1.png)

- ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸzipãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­ã®å¤‰æ›ã‚¹ã‚¯ãƒªãƒ—ãƒˆ`config_converter.py`ã‚’QMKãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã‚’é…ç½®ã—ã¦ã„ã‚‹ãƒ•ã‚©ãƒ«ãƒ€ã¨åŒã˜å ´æ‰€ã«ç½®ãã€‚
![](/images/gl516design/9-2_bmp-2.png)
:::details Tips:config_converter.pyã®å ´æ‰€
ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰zipãƒ•ã‚¡ã‚¤ãƒ«\AboutDefaultFirmware\keyboards\config_converter.py
:::

- Powershellã‚’é–‹ãã€QMKãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ãŒç½®ã„ã¦ã‚ã‚‹ã¨ã“ã‚ã¾ã§ç§»å‹•ã™ã‚‹ã€‚
`cd C:\Users\Salicylic_acid3\Documents\QMK_Firmware\`
:::details Tips:Powershellã®èµ·å‹•æ–¹æ³•
Powershellã¯Windowsã®åŸºæœ¬æ©Ÿèƒ½ãªã®ã§ã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã§æ¤œç´¢ã™ã‚‹ã¨è¦‹ã¤ã‹ã‚Šã¾ã™ã€‚
![](/images/gl516design/9-7_powershell-1.png)
:::

- PowerShellã§ä»¥ä¸‹ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚
`python ./config_converter.py ./qmk_firmware/keyboards/gl516/template`
:::message
ã‚‚ã—PythonãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹å ´åˆã¯åˆ¥é€”ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚
:::

- å®Ÿè¡Œçµæœã‚’ç¢ºèªã—ã€ã‚¨ãƒ©ãƒ¼ãŒç„¡ã„ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã€‚
![](/images/gl516design/9-3_bmp-3.png)
*æ­£å¸¸çµ‚äº†æ™‚ã®å‡ºåŠ›ä¾‹*

- ãƒ„ãƒ¼ãƒ«ã‚’é…ç½®ã—ãŸå ´æ‰€ã«3ã¤ã®jsonãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã€‚
![](/images/gl516design/9-4_bmp-4.png)

# ï¼’ï¼ç”Ÿæˆã—ãŸBMPè¨­å®šç”¨jsonãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã™ã‚‹

- 3ã¤ã®jsonãƒ•ã‚¡ã‚¤ãƒ«ã®å†…ã€åˆ†å‰²å‹ç”¨ã®2ã¤ã®jsonãƒ•ã‚¡ã‚¤ãƒ«ã¯ä¸è¦ãªã®ã§å‰Šé™¤ã™ã‚‹ã€‚
`gl516_template_master_left_config.json`ã¨`gl516_template_slave_right_config.json`ã®2ã¤ã‚’å‰Šé™¤ã™ã‚‹ã€‚
![](/images/gl516design/9-5_bmp-5.png)

- æ®‹ã£ãŸ LPME-IOç”¨ã®jsonãƒ•ã‚¡ã‚¤ãƒ«ã‚’`gl516_template_config.json`ç­‰ã«ãƒªãƒãƒ¼ãƒ ã™ã‚‹ã€‚
![](/images/gl516design/9-6_bmp-6.png)

- `gl516_template_config.json`ã‚’é–‹ãã€`diode_direction`ã‚’`4`ã«å¤‰æ›´ã™ã‚‹ã€‚
```diff json:gl516_template_config.json
{"config":
	{
		"version":2,
		"device_info":{"vid":"0xF516","pid":"0xF516",
			"name":"template","manufacture":"Salicylic_Acid","description":""},
		"matrix":{"rows":10,"cols":8,"device_rows":5, "device_cols":8,
-			"debounce":1,"is_left_hand":1,"diode_direction":2,
+			"debounce":1,"is_left_hand":1,"diode_direction":4,
			"row_pins":[5, 6, 7, 8, 9, 5, 6, 7, 8, 9],
			"col_pins":[20, 19, 18, 17, 16, 15, 14, 10, 20, 19, 18, 17, 16, 15, 14, 10],
		"layout":[1, 2, 3, 4, 5, 6, 7, 8, 41, 42, 43, 44, 45, 46, 47, 48, 0,
			 9, 10, 11, 12, 13, 14, 15, 16, 49, 50, 51, 52, 53, 54, 55, 56, 0,
			 17, 18, 19, 20, 21, 22, 23, 24, 57, 58, 59, 60, 61, 62, 63, 64, 0,
			 25, 26, 27, 28, 29, 30, 31, 32, 65, 66, 67, 68, 69, 70, 71, 72, 0,
			 33, 34, 35, 36, 37, 38, 39, 40, 73, 74, 75, 76, 77, 78, 79, 80]},
		"mode":"SINGLE","startup":1,
		"peripheral":{"max_interval":60,"min_interval":30,"slave_latency":7},
		"central":{"max_interval":60,"min_interval":30,"slave_latency":0},
		"led":{"pin":1, "num":80},
		"keymap":{"locale":"US","use_ascii":0}
}}
```
:::details Tips:ãƒ­ãƒ¼ã‚¿ãƒªãƒ¼ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ã®è¨­å®šæ–¹æ³•
ãƒ­ãƒ¼ã‚¿ãƒªãƒ¼ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ã®è¨­å®šæ–¹æ³•ã¯ã“ã¡ã‚‰ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
https://github.com/sekigon-gonnoc/BLE-Micro-Pro/blob/master/docs/edit_other_config_file.md
ãƒ”ãƒ³ç•ªå·ã¯ä»¥ä¸‹ã®ç”»åƒã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚
https://github.com/sekigon-gonnoc/BLE-Micro-Pro/blob/master/pin%20assign.jpg
:::

# åˆ¥è§£ï¼QMKãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã‚’ä½œã£ã¦ãªã„ã€ã¨ã„ã†æ–¹ã¸

ï¼˜ç« ã«ã¦åˆ¥è§£ã¨ã—ã¦QMKãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã‚’ä½œã‚‰ãšã«åˆ©ç”¨ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚
BMPã§ã‚‚åŒæ§˜ã®ã“ã¨ãŒå¯èƒ½ã§ã€templateç”¨ã«ä½œã£ãŸè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ãˆã°ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
BMPç”¨ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯[ã“ã¡ã‚‰](https://github.com/Salicylic-acid3/Zenn-Content-Public/blob/main/gl516design/samples/gl516_template_config.json)ã€‚
ä¸Šè¿°ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’é©ç”¨ã®ä¸Šã€Remapã§ã‚­ãƒ¼ãƒãƒƒãƒ—ã®è¨­å®šã‚’è¡Œã£ã¦ãã ã•ã„ã€‚
